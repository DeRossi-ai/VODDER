<script>
  const rssUrls = [
    'https://rss.app/feeds/5YZmYIMMzBrOWYu1.xml', // Primer feed US
    'https://rss.app/feeds/DKy7wnBVMnrEmA3Z.xml'  // Segundo feed US
  ];

  const monetagLinks = [
    'https://stenexeb.xyz/4/9067149',
    'https://stenexeb.xyz/4/9067125',
    'https://stenexeb.xyz/4/9067207',
    'https://stenexeb.xyz/4/9067146'
  ];

  function checkPopupBlocker() {
    const test = window.open('', '', 'width=100,height=100');
    if (!test || test.closed || typeof test.closed == 'undefined') {
      document.body.innerHTML = `
        <div style="text-align:center;padding:40px;color:white;background:#121212;font-family:sans-serif">
          <h1>Please allow pop-ups and ads</h1>
          <p>This site is funded by non-intrusive advertising. To access the content, please allow pop-ups in your browser settings, and reload the site</p>
        </div>
      `;
      return false;
    } else {
      test.close();
      return true;
    }
  }

  function redirectWithMonetag(finalUrl) {
    const allLinks = [...monetagLinks, finalUrl];
    let i = 0;
    function openNext() {
      if (i < allLinks.length) {
        window.open(allLinks[i], '_blank');
        i++;
        setTimeout(openNext, 1000);
      }
    }
    openNext();
  }

  async function loadRSS() {
    const container = document.getElementById('rss-feed');
    let totalItems = [];

    for (const url of rssUrls) {
      try {
        const res = await fetch('https://api.rss2json.com/v1/api.json?rss_url=' + encodeURIComponent(url));
        const data = await res.json();
        totalItems = totalItems.concat(data.items);
      } catch (error) {
        console.error('Error loading RSS:', error);
      }
    }

    totalItems.slice(0, 10).forEach((item) => {
      const li = document.createElement('li');
      const a = document.createElement('a');
      a.textContent = item.title;
      a.href = '#';
      a.onclick = (e) => {
        e.preventDefault();
        redirectWithMonetag(item.link);
      };
      li.appendChild(a);
      container.appendChild(li);
    });
  }

  if (checkPopupBlocker()) {
    loadRSS();
  }
</script>


